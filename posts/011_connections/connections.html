<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.25">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Alina">
<meta name="dcterms.date" content="2025-10-06">
<meta name="description" content="How good are LLMs at categorical games? Can it solve Connections?">

<title>Can Chat-GPT5 Walk Me Through Connections? â€“ Alinaâ€™s Blog</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-7b89279ff1a6dce999919e0e67d4d9ec.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-9d0d2c4fe2252cabc78cecb5d575732d.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    </a>
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Alinaâ€™s Blog</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Can Chat-GPT5 Walk Me Through Connections?</h1>
                  <div>
        <div class="description">
          How good are LLMs at categorical games? Can it solve Connections?
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">LLMs</div>
                <div class="quarto-category">Connections</div>
                <div class="quarto-category">Puzzle</div>
                <div class="quarto-category">NYT Games</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Alina </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">October 6, 2025</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<section id="ive-already-tested-chat-gpt5-on-other-puzzles-how-does-it-do-with-one-of-the-most-annoying---connections" class="level3">
<h3 class="anchored" data-anchor-id="ive-already-tested-chat-gpt5-on-other-puzzles-how-does-it-do-with-one-of-the-most-annoying---connections">Iâ€™ve already tested Chat-GPT5 on other puzzles, how does it do with one of the most annoying - Connections?</h3>
<p><img src="connections.png" class="img-fluid"></p>
<p><strong>Task</strong>: I am first going to prompt the LLM that I will be giving it a list of words, and its job is to play the NYT â€˜Connectionsâ€™ game with that group of words. Then I will respond with a list of all 16 words and see how successful ChatGPT5 is at playing the game!</p>
<section id="prompt" class="level4">
<h4 class="anchored" data-anchor-id="prompt">Prompt:</h4>
<blockquote class="blockquote">
<p>I will be giving you a list of 16 words. I want you to play the New York Times Connections game with those words.</p>
</blockquote>
</section>
<section id="response" class="level4">
<h4 class="anchored" data-anchor-id="response">Response:</h4>
<blockquote class="blockquote">
<p>Perfect â€” Iâ€™m ready! Go ahead and give me your list of 16 words, and Iâ€™ll solve it like a <em>Connections</em> puzzle.</p>
</blockquote>
</section>
<section id="list-of-words" class="level4">
<h4 class="anchored" data-anchor-id="list-of-words">List of Words:</h4>
<blockquote class="blockquote">
<p>raven, pinky, chip, jet, inky, rocky, file, clyde, hardy, sue, teller, charge, indict, itchy, pitch, cher</p>
</blockquote>
</section>
<section id="answer" class="level4">
<h4 class="anchored" data-anchor-id="answer">Answer:</h4>
<p>Nice â€” this is a fun and tricky <em>Connections</em>-style list! Letâ€™s solve it step by step.</p>
<p>Here are the 16 words again: <strong>raven, pinky, chip, jet, inky, rocky, file, clyde, hardy, sue, teller, charge, indict, itchy, pitch, cher</strong></p>
<hr>
</section>
</section>
<section id="group-1-pac-man-ghosts" class="level3">
<h3 class="anchored" data-anchor-id="group-1-pac-man-ghosts">ğŸŸ© Group 1: <strong>Pac-Man ghosts</strong></h3>
<p>These are the names of the ghosts from <em>Pac-Man</em>:</p>
<ul>
<li><strong>Blinky</strong> (not here)</li>
<li><strong>Pinky</strong> âœ…</li>
<li><strong>Inky</strong> âœ…</li>
<li><strong>Clyde</strong> âœ…</li>
</ul>
<p><strong>Group:</strong> Pinky, Inky, Clyde, (implied Blinky) âœ… <strong>Category:</strong> <em>Pac-Man ghosts</em></p>
<hr>
</section>
<section id="group-2-famous-duos-pairs-x-y" class="level3">
<h3 class="anchored" data-anchor-id="group-2-famous-duos-pairs-x-y">ğŸŸ¨ Group 2: <strong>Famous duos / pairs (X &amp; Y)</strong></h3>
<ul>
<li><strong>Laurel &amp; Hardy</strong> âœ…</li>
<li><strong>Bonnie &amp; Clyde</strong> âœ…</li>
<li><strong>Hall &amp; Oates</strong> (no)</li>
<li><strong>Simon &amp; Garfunkel</strong> (no) Letâ€™s see what else pairsâ€¦</li>
<li><strong>Sonny &amp; Cher</strong> âœ…</li>
<li><strong>Penn &amp; Teller</strong> âœ…</li>
</ul>
<p><strong>Group:</strong> Hardy, Clyde, Cher, Teller âœ… <strong>Category:</strong> <em>One half of famous duos</em></p>
<hr>
</section>
<section id="group-3-words-related-to-electricity-energy" class="level3">
<h3 class="anchored" data-anchor-id="group-3-words-related-to-electricity-energy">ğŸŸ¦ Group 3: <strong>Words related to electricity / energy</strong></h3>
<ul>
<li><strong>Charge</strong> âœ…</li>
<li><strong>Jet</strong> (as in propulsion, not exactly)</li>
<li><strong>Indict</strong> (no) Hmm, maybe not. Letâ€™s look again.</li>
</ul>
<hr>
</section>
<section id="group-3-words-related-to-lawlegal-terms" class="level3">
<h3 class="anchored" data-anchor-id="group-3-words-related-to-lawlegal-terms">ğŸŸª Group 3: <strong>Words related to law/legal terms</strong></h3>
<ul>
<li><strong>Sue</strong> âœ…</li>
<li><strong>Indict</strong> âœ…</li>
<li><strong>Charge</strong> âœ…</li>
<li><strong>File</strong> âœ… (as in â€œfile a lawsuitâ€)</li>
</ul>
<p><strong>Group:</strong> Sue, Indict, Charge, File âœ… <strong>Category:</strong> <em>Legal actions</em></p>
<hr>
<p>That leaves: <strong>raven, jet, chip, rocky, itchy, pitch</strong></p>
<hr>
</section>
<section id="group-4-nicknames-or-adjectives-ending-in--y-cartoon-character-like" class="level3">
<h3 class="anchored" data-anchor-id="group-4-nicknames-or-adjectives-ending-in--y-cartoon-character-like">ğŸŸ¦ Group 4: <strong>Nicknames or adjectives ending in â€œ-yâ€ (cartoon / character-like)</strong></h3>
<ul>
<li>Rocky âœ… (Rocky &amp; Bullwinkle)</li>
<li>Itchy âœ… (<em>Itchy &amp; Scratchy Show</em>)</li>
<li>Chip âœ… (Chip &amp; Dale)</li>
<li>Jet âœ… (as in <em>The Jetsons</em> family name â€œJetsonâ€? hmm) Or maybe â€œRavenâ€ fits elsewhere.</li>
</ul>
<p>Letâ€™s test an alternate pattern.</p>
<hr>
</section>
<section id="possible-theme-nicknames-from-pop-culture-animated-shows" class="level3">
<h3 class="anchored" data-anchor-id="possible-theme-nicknames-from-pop-culture-animated-shows">Possible theme: <strong>Nicknames from pop culture / animated shows</strong></h3>
<ul>
<li><strong>Rocky</strong> â†’ <em>Rocky &amp; Bullwinkle</em></li>
<li><strong>Itchy</strong> â†’ <em>Itchy &amp; Scratchy</em></li>
<li><strong>Chip</strong> â†’ <em>Chip &amp; Dale</em></li>
<li><strong>Jet</strong> â†’ <em>The Jetsons</em> (Jetson family)</li>
</ul>
<p>âœ… <strong>Category:</strong> <em>Cartoon / animated show characters</em></p>
<hr>
<p>âœ… <strong>Final Groups:</strong></p>
<table class="caption-top table">
<colgroup>
<col style="width: 5%">
<col style="width: 56%">
<col style="width: 37%">
</colgroup>
<thead>
<tr class="header">
<th>Color</th>
<th>Words</th>
<th>Category</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>ğŸŸ©</td>
<td>Pinky, Inky, Clyde, Blinky (missing but implied)</td>
<td>Pac-Man ghosts</td>
</tr>
<tr class="even">
<td>ğŸŸ¨</td>
<td>Hardy, Clyde, Cher, Teller</td>
<td>Famous duos (one half of a pair)</td>
</tr>
<tr class="odd">
<td>ğŸŸª</td>
<td>Sue, Indict, Charge, File</td>
<td>Legal actions</td>
</tr>
<tr class="even">
<td>ğŸŸ¦</td>
<td>Rocky, Itchy, Chip, Jet</td>
<td>Cartoon characters</td>
</tr>
</tbody>
</table>
<hr>
<p>Would you like me to <em>rank</em> the groups from easiest to hardest like the NYT game does?</p>
</section>
<section id="something-already-seems-off" class="level3">
<h3 class="anchored" data-anchor-id="something-already-seems-off">Something already seems offâ€¦</h3>
<p>If you look closely at the Green and Yellow colors, the Green group only has 3 words (Blinky isnâ€™t a part of the word list) and the Yellow group reuses a word from the Green group (Clyde).</p>
<p>Also, â€œravenâ€ never gets used.</p>
<p><em>Nevertheless, letâ€™s try the Yellow group!</em></p>
<section id="yellow-group-hardy-clyde-cher-and-teller-works" class="level5">
<h5 class="anchored" data-anchor-id="yellow-group-hardy-clyde-cher-and-teller-works">Yellow group (Hardy, Clyde, Cher, and Teller) works!</h5>
<p>ChatGTP5 gussed the category as well â€“ â€œSecond in a famous real-life duoâ€</p>
<p><em>Now letâ€™s move onto Purple groupâ€¦</em></p>
</section>
<section id="purple-group-sue-indict-charge-file-is-correct" class="level5">
<h5 class="anchored" data-anchor-id="purple-group-sue-indict-charge-file-is-correct">Purple group (Sue, Indict, Charge, File) is correct!</h5>
<p>Category is also correct!</p>
<p><em>Letâ€™s try Blue now</em></p>
</section>
<section id="blue-group-rocky-itchy-chip-jet-is-wrong-but-only-one-off" class="level5">
<h5 class="anchored" data-anchor-id="blue-group-rocky-itchy-chip-jet-is-wrong-but-only-one-off">Blue group (Rocky, Itchy, Chip, Jet) is wrong, but only one off</h5>
<p>I assume this is where the issue with the Green group comes in since it was missing one and â€œRavenâ€ was missing from the group of words entirely.</p>
<p>Letâ€™s ask the LLM!</p>
</section>
<section id="prompt-1" class="level4">
<h4 class="anchored" data-anchor-id="prompt-1">Prompt:</h4>
<blockquote class="blockquote">
<p>The green group is missing a word and the blue group is incorrect. The other two groups are correct.</p>
</blockquote>
</section>
<section id="answer-1" class="level4">
<h4 class="anchored" data-anchor-id="answer-1">Answer:</h4>
<blockquote class="blockquote">
<p>Nice â€” thanks for the hint. You were right: my blue group was off and the green group I gave was incomplete. Hereâ€™s the corrected solution.</p>
<h1 id="final-groups">Final groups</h1>
<p><strong>Green â€” synonyms for â€œblackâ€</strong> raven, jet, inky, pitch <em>(raven-black, jet-black, inky-black, pitch-black)</em></p>
<p><strong>Yellow â€” one half of famous duos</strong> hardy, clyde, cher, teller <em>(Laurel &amp; Hardy; Bonnie &amp; Clyde; Sonny &amp; Cher; Penn &amp; Teller)</em></p>
<p><strong>Purple â€” legal actions / filings</strong> file, indict, charge, sue</p>
<p><strong>Blue â€” halves of famous cartoon/animated pairs</strong> pinky, chip, rocky, itchy <em>(Pinky &amp; the Brain; Chip &amp; Dale; Rocky &amp; Bullwinkle; Itchy &amp; Scratchy)</em></p>
<p>Want me to explain any grouping in more detail or play again with a new set? ğŸ¯</p>
</blockquote>
<p>This looks like it makes more sense now, letâ€™s try it!</p>
<section id="new-green-group-raven-jet-inky-pitch-is-correct" class="level5">
<h5 class="anchored" data-anchor-id="new-green-group-raven-jet-inky-pitch-is-correct">New Green group (Raven, Jet, Inky, Pitch) is correct!</h5>
<p>Category (â€œBlackâ€) is also correct!</p>
<p><em>Blue group has to be correct now, but letâ€™s just test it</em></p>
</section>
<section id="new-blue-group-pinky-chip-rocky-itchy-is-correct" class="level5">
<h5 class="anchored" data-anchor-id="new-blue-group-pinky-chip-rocky-itchy-is-correct">New Blue group (Pinky, Chip, Rocky, Itchy) is correct!</h5>
<p>Category is also correct!</p>
</section>
</section>
</section>
<section id="my-thoughts" class="level3">
<h3 class="anchored" data-anchor-id="my-thoughts">My Thoughts</h3>
<p>Although ChatGTP5 was able to solve it in the end, I was a bit disappointed that it didnâ€™t catch its initial error with the missing words. I found it very odd that it completely added in a word that wasnâ€™t present and completely missed a word. I think Connections sometimes has red-herring categories that only fit three of the words to purposefully throw people off. I think the LLM fell for it and inserted its own word that wouldâ€™ve worked for that category. However, once I gave it a hint and pointed out the flaw, it was perfectly able to figure out the last two categories. Speaking of categories, the LLM was also able to guess those. The only thing the LLM wasnâ€™t really able to guess was the color of the categories, which, for those who arenâ€™t very familiar with â€œConnectionsâ€, denotes the difficulty of the category. Yellow is easist, Green is easy, Blue is medium, and Purple is hardest.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "î§‹";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/alinagu19\.github\.io\/comm4190_F25_Using_LLMs_Blog\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>